(this.webpackJsonpreact_blog=this.webpackJsonpreact_blog||[]).push([[0],{29:function(n,e,t){},37:function(n,e,t){"use strict";t.r(e);var c,i,a,r,o,s,j,b,d,l,x,h,u,O,p=t(1),g=t.n(p),f=t(21),m=t.n(f),v=(t(29),t(4)),y=t(2),w=t(3),k=t(7),S=t(5),C=Object(p.createContext)(null),z="token",I=function(n){localStorage.setItem(z,n)},L=function(){return localStorage.getItem(z)},J=t(0),E=w.a.div(c||(c=Object(y.a)(["\n  display: flex;\n  position: fixed;\n  align-items: center;\n  justify-content: space-between;\n  top: 0;\n  left: 0;\n  right: 0;\n  height: 64px;\n  padding: 0 32px;\n  box-sizing: border-box;\n  border-bottom: 1px solid grey;\n  background-color: white;\n"]))),N=w.a.div(i||(i=Object(y.a)(["\n  font-size: 28px;\n  font-weight: bold;\n"]))),P=w.a.div(a||(a=Object(y.a)(["\n  display: flex;\n  list-style: none;\n  align-items: center;\n  height: 64px;\n"]))),T=w.a.div(r||(r=Object(y.a)(["\n  display: flex;\n  align-items: center;\n\n  "," {\n    margin-left: 16px;\n  }\n"])),P),U=Object(w.a)(k.b)(o||(o=Object(y.a)(["\n  display: flex;\n  height: 100%;\n  width: 100px;\n  align-items: center;\n  justify-content: center;\n  margin-right: 10px;\n  cursor: pointer;\n  box-sizing: border-box;\n  text-decoration: none;\n  color: black;\n  text-align:center;\n\n  ","\n"])),(function(n){return n.$active&&"\n  background: rgba(0, 0, 0, 0.1);\n  "})),D=w.a.div(s||(s=Object(y.a)(["\n  height: 64px;\n  display: flex;\n  "," {\n    margin-left: 16px;\n  }\n"])),P),A=Object(w.a)(k.b)(j||(j=Object(y.a)(["\n  cursor: pointer;\n  text-decoration: none;\n  color: black;\n  height: 100%;\n  display: flex;\n  height: 100%;\n  width: 100px;\n  align-items: center;\n  justify-content: center;\n\n  ","\n"])),(function(n){return n.$active&&"\n    background: rgba(0, 0, 0, 0.1);\n    "})),F=Object(w.a)(A)(b||(b=Object(y.a)([""]))),M=Object(w.a)(A)(d||(d=Object(y.a)([""])));function $(){var n=Object(S.g)(),e=Object(S.f)(),t=Object(p.useContext)(C),c=t.user,i=t.setUser;return Object(J.jsxs)(E,{children:[Object(J.jsxs)(T,{children:[Object(J.jsx)(N,{children:"BLOG"}),Object(J.jsxs)(P,{children:[Object(J.jsx)(U,{to:"/",$active:"/"===n.pathname,children:"\u9996\u9801"}),Object(J.jsx)(U,{to:"/about",$active:"/about"===n.pathname,children:"\u95dc\u65bc"}),Object(J.jsx)(U,{to:"/post-list",$active:"/post-list"===n.pathname,children:"\u6587\u7ae0\u5217\u8868"}),c&&Object(J.jsx)(U,{to:"/new-post",$active:"/new-post"===n.pathname,children:"\u767c\u5e03\u6587\u7ae0"})]})]}),Object(J.jsxs)(D,{children:[!c&&Object(J.jsxs)(J.Fragment,{children:[Object(J.jsx)(A,{to:"/login",$active:"/login"===n.pathname,children:"\u767b\u5165"}),Object(J.jsx)(F,{to:"/register",$active:"/register"===n.pathname,children:"\u8a3b\u518a"})]}),c&&Object(J.jsx)(M,{onClick:function(){I(""),i(null),"/"!==n.pathname&&e.push("/")},children:"\u767b\u51fa"})]})]})}var B=w.a.footer(l||(l=Object(y.a)([""]))),X=w.a.div(x||(x=Object(y.a)(["\n  background: #e8efee;\n  padding: 20px;\n  color: #484848;\n"]))),_=w.a.div(h||(h=Object(y.a)(["\n  display: flex;\n  justify-content: space-between;\n"]))),W=w.a.div(u||(u=Object(y.a)(["\n  margin-right: 16px;\n  font-size: 16px;\n"]))),Y=w.a.div(O||(O=Object(y.a)(["\n  background: #1C2C58;\n  padding: 12px;\n  text-align: center;\n  color: white;\n  font-size: 16px;\n"])));function Z(){return Object(J.jsxs)(B,{children:[Object(J.jsx)(X,{children:Object(J.jsxs)(_,{children:[Object(J.jsx)(W,{}),Object(J.jsxs)(W,{children:[Object(J.jsx)("div",{children:"WendyL"}),Object(J.jsx)("div",{children:"email\uff1alwy12993@gmail.com"})]})]})}),Object(J.jsx)(Y,{children:"Copyright \xa9 2021 WendyL All Rights Reserved. WendyL \u7248\u6b0a\u6240\u6709"})]})}var R,V,q,G,Q,H,K,nn,en,tn,cn,an,rn,on,sn,jn=t(9),bn="https://student-json-api.lidemy.me",dn=function(n,e){return fetch("".concat(bn,"/posts?_limit=").concat(n,"&_page=").concat(e,"&_sort=createdAt&_order=desc")).then((function(n){return n})).catch((function(n){return console.log("error:",n)}))},ln=function(){var n=L();return fetch("".concat(bn,"/me"),{headers:{authorization:"Bearer ".concat(n)}}).then((function(n){return n.json()}))},xn=w.a.form(R||(R=Object(y.a)(["\n  width: 30%;\n  margin: 30px auto;\n  min-height: 500px;\n"]))),hn=w.a.div(V||(V=Object(y.a)([""]))),un=w.a.div(q||(q=Object(y.a)(["\n  margin: 20px 0 30px;\n"]))),On=w.a.button(G||(G=Object(y.a)([""]))),pn=w.a.h3(Q||(Q=Object(y.a)(["\n  color: red;\n"])));function gn(){var n=Object(jn.useContext)(C).setUser,e=Object(jn.useState)(""),t=Object(v.a)(e,2),c=t[0],i=t[1],a=Object(jn.useState)(""),r=Object(v.a)(a,2),o=r[0],s=r[1],j=Object(jn.useState)(""),b=Object(v.a)(j,2),d=b[0],l=b[1],x=Object(S.f)();return Object(J.jsxs)(xn,{onSubmit:function(e){e.preventDefault(),function(n,e){return fetch("".concat(bn,"/login"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({username:n,password:e})}).then((function(n){return n.json()}))}(c,o).then((function(e){if(0===e.ok)return l(e.message);I(e.token),ln().then((function(e){if(1!==e.ok)return I(null),l(e.toString());n(e.data),x.goBack()}))}))},children:[Object(J.jsxs)(hn,{children:["Username\uff1a",Object(J.jsx)("input",{type:"text",value:c,onChange:function(n){i(n.target.value),l("")}})]}),Object(J.jsxs)(un,{children:["Password\uff1a",Object(J.jsx)("input",{type:"password",value:o,onChange:function(n){s(n.target.value),l("")}})]}),Object(J.jsx)(On,{type:"submit",children:"\u9001\u51fa"}),d&&Object(J.jsx)(pn,{children:d})]})}var fn,mn,vn,yn,wn,kn,Sn,Cn,zn,In=w.a.div(H||(H=Object(y.a)(["\n  margin: 0 auto;\n  background-color: ;\n  justify-content: center;\n"]))),Ln=w.a.div(K||(K=Object(y.a)(["\n  padding: 30px 0;\n  width: 100%;\n  margin: 0 auto;\n  font-size: 28px;\n  text-align: center;\n"]))),Jn=w.a.div(nn||(nn=Object(y.a)(['\n  position: relative;\n  width: 100%;\n  margin: 0 auto;\n  font-size: 28px;\n  text-align: center;\n  background-image: url("https://images.plurk.com/2UUrysp3EMpiOr3X8PLEBm.jpg");\n  background-size: cover;\n  height: 500px;\n  opacity: .8;\n  z-index: -1;\n']))),En=w.a.div(en||(en=Object(y.a)(["\n  display: flex;\n  margin: 0 auto;\n  width: 70%;\n"]))),Nn=w.a.div(tn||(tn=Object(y.a)(["\n\n"]))),Pn=Object(w.a)(k.b)(cn||(cn=Object(y.a)(["  \n  display: flex;\n  border: 1px solid rgba(0, 12, 34, 0.2);\n  padding: 20px 5px;\n  justify-content: space-between;\n  align-items: flex-end;\n  text-decoration: none;\n"]))),Tn=w.a.div(an||(an=Object(y.a)(["\n  width: 35%;\n  margin-left: 10px;\n"]))),Un=Object(w.a)(k.b)(rn||(rn=Object(y.a)(["\n  margin: 0 20px;\n  font-size: 24px;\n  width: 70%;\n  color: #333;\n  text-decoration: none;\n"]))),Dn=w.a.div(on||(on=Object(y.a)(["\n  display: flex;\n  margin-right: 10px;\n  color: rgba(0, 0, 0, 0.6);\n  text-align: left;  \n"]))),An=w.a.div(sn||(sn=Object(y.a)(["\n  display: flex;\n  width: 60%;\n  margin-right: 10px;\n  color: rgba(0, 0, 0, 0.6);\n  text-align: left;\n  display:-webkit-box;\n  overflow:hidden;\n  text-overflow:ellipsis;\n  -webkit-line-clamp: 3;\n  -webkit-box-orient: vertical;\n  line-height: 1.5;\n  max-height: 3;\n"])));function Fn(n){var e=n.post;return Object(J.jsxs)(Pn,{to:"/posts/".concat(e.id),children:[Object(J.jsxs)(Tn,{children:[Object(J.jsx)(Un,{children:e.title}),Object(J.jsx)(Dn,{children:new Date(e.createdAt).toLocaleString()})]}),Object(J.jsx)(An,{children:e.body})]})}function Mn(){var n=Object(p.useState)([]),e=Object(v.a)(n,2),t=e[0],c=e[1];return Object(p.useEffect)((function(){dn(3,1).then((function(n){if(n.headers.get("X-Total-Count"))return n.json()})).then((function(n){c(n)}))}),[]),Object(J.jsxs)(In,{children:[Object(J.jsx)(Jn,{}),Object(J.jsx)(Ln,{children:"\u6700\u65b0\u6587\u7ae0"}),Object(J.jsx)(En,{children:Object(J.jsx)(Nn,{children:t.map((function(n){return Object(J.jsx)(Fn,{post:n},n.id)}))})})]})}var $n,Bn,Xn,_n,Wn=w.a.div(fn||(fn=Object(y.a)(["\n  width: 80%;\n  min-height: 550px;\n  margin: 0 auto;\n  background-color: ;\n  justify-content: center;\n"]))),Yn=w.a.div(mn||(mn=Object(y.a)(["\n  padding: 30px 0;\n  width: 100%;\n  margin: 0 auto;\n  font-size: 28px;\n  text-align: center;\n"]))),Zn=w.a.div(vn||(vn=Object(y.a)(["\n  margin: 0 auto;\n  width: 70%;\n\n  justify-content: center;\n"]))),Rn=w.a.div(yn||(yn=Object(y.a)(["  \n  display: flex;\n  border: 1px solid rgba(0, 12, 34, 0.2);\n  padding: 20px 5px;\n  justify-content: space-between;\n  align-items: flex-end;\n"]))),Vn=Object(w.a)(k.b)(wn||(wn=Object(y.a)(["\n  margin: 0 20px;\n  font-size: 24px;\n  width: 70%;\n  color: #333;\n  text-decoration: none;\n"]))),qn=w.a.div(kn||(kn=Object(y.a)(["\n  display: flex;\n  margin-right: 10px;\n  color: rgba(0, 0, 0, 0.6);\n  text-align: left;  \n"]))),Gn=w.a.div(Sn||(Sn=Object(y.a)(["\n  width: 70%;\n  display: flex;\n  margin: 0 auto;\n  justify-content: center;\n  background-color: grey;\n  padding: 5px 0;\n"]))),Qn=w.a.button(Cn||(Cn=Object(y.a)(["\n  width: 60px;\n  height: 2rem;\n  background-color: white;\n  margin: 0 5px;\n  border: 1px solid grey;\n  cursor: pointer;\n"]))),Hn=w.a.span(zn||(zn=Object(y.a)(["\n  margin: 0 5px;\n"])));function Kn(n){var e=n.post;return Object(J.jsxs)(Rn,{children:[Object(J.jsx)(Vn,{to:"/posts/".concat(e.id),children:e.title}),Object(J.jsx)(qn,{children:new Date(e.createdAt).toLocaleString()})]})}function ne(){var n=Object(p.useState)([]),e=Object(v.a)(n,2),t=e[0],c=e[1],i=Object(p.useState)(1),a=Object(v.a)(i,2),r=a[0],o=a[1],s=Object(p.useState)(1),j=Object(v.a)(s,2),b=j[0],d=j[1];return Object(p.useEffect)((function(){dn(5,r).then((function(n){if(n.headers.get("X-Total-Count")){var e=Number(n.headers.get("X-Total-Count"));return d(Math.ceil(e/5)),n.json()}})).then((function(n){c(n)}))}),[b,r]),Object(J.jsxs)(Wn,{children:[Object(J.jsx)(Yn,{children:"\u6587\u7ae0\u5217\u8868"}),Object(J.jsx)(Zn,{children:t.map((function(n){return Object(J.jsx)(Kn,{post:n},n.id)}))}),Object(J.jsx)(Gn,{children:Object(J.jsxs)("div",{children:[1!==r&&Object(J.jsxs)(J.Fragment,{children:[Object(J.jsx)(Qn,{onClick:function(){o(1)},children:"\u7b2c\u4e00\u9801"}),Object(J.jsx)(Qn,{onClick:function(){o(r-1)},children:"\uff1c"})]}),Object(J.jsxs)(Hn,{children:["\u7b2c ",r," \u9801"]}),r!==b&&Object(J.jsxs)(J.Fragment,{children:[Object(J.jsx)(Qn,{onClick:function(){o(r+1)},children:"\uff1e"}),Object(J.jsx)(Qn,{onClick:function(){o(b)},children:"\u6700\u672b\u9801"})]})]})})]})}var ee,te,ce,ie,ae,re,oe=w.a.div($n||($n=Object(y.a)(["\n  width: 60%;\n  min-height: 500px;\n  margin: 20px auto 30px;\n  align-items: center;\n"]))),se=w.a.div(Bn||(Bn=Object(y.a)(["\n  font-size: 28px;\n  font-weight: bold;\n  text-align: center;\n  margin-top: 40px;\n"]))),je=w.a.div(Xn||(Xn=Object(y.a)(["\n  text-align: right;\n  margin: 15px 0;\n"]))),be=w.a.div(_n||(_n=Object(y.a)(["\n  font-size: 20px;\n  line-height: 35px;\n"])));function de(){var n=Object(p.useState)(null),e=Object(v.a)(n,2),t=e[0],c=e[1],i=Object(S.h)().id;return Object(p.useEffect)((function(){(function(n){return fetch("".concat(bn,"/posts?id=").concat(n)).then((function(n){return n.json()})).catch((function(n){return console.log("error:",n)}))})(i).then((function(n){c(n[0])}))}),[i]),Object(J.jsxs)(oe,{children:[Object(J.jsx)(se,{children:t&&t.title}),Object(J.jsx)(je,{children:new Date(t&&t.createdAt).toLocaleString()}),Object(J.jsx)(be,{children:t&&t.body})]})}var le,xe,he,ue,Oe,pe,ge,fe=w.a.form(ee||(ee=Object(y.a)(["\n  width: 70%;\n  margin: 20px auto;\n  min-height: 500px;\n"]))),me=w.a.input(te||(te=Object(y.a)(["\n  width: 100%;\n  margin: 10px auto 20px;\n  font-size: 20px;  \n"]))),ve=w.a.textarea(ce||(ce=Object(y.a)(["\n  width: 100%;\n  margin: 10px auto 20px;\n  font-size: 20px;\n  line-height: 35px;\n"]))),ye=w.a.div(ie||(ie=Object(y.a)(["\n  font-weight: bold;\n  font-size: 20px;\n"]))),we=w.a.button(ae||(ae=Object(y.a)(["\n  font-size: 16px;\n  background-color: #e7e7e7;\n  padding: 10px 28px;\n  border: none;\n"]))),ke=w.a.h2(re||(re=Object(y.a)(["\n  color: red;\n"])));function Se(){var n=Object(p.useState)(""),e=Object(v.a)(n,2),t=e[0],c=e[1],i=Object(p.useState)(""),a=Object(v.a)(i,2),r=a[0],o=a[1],s=Object(p.useState)(""),j=Object(v.a)(s,2),b=j[0],d=j[1],l=Object(p.useContext)(C).user,x=Object(S.f)();l||x.push("/");return Object(J.jsxs)(fe,{className:"container",onSubmit:function(n){n.preventDefault(),function(n,e){return fetch("".concat(bn,"/posts"),{method:"POST",headers:{"content-type":"application/json",authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6ImhleSIsInVzZXJJZCI6IjAwNmIwNjkwYTgyY2YiLCJpYXQiOjE2MDQxMzI4MTZ9.dfJ4z8DIASsPEytsHE3zA1i2MgNCb2zMLogfqq5ugWU"},body:JSON.stringify({title:n,body:e})}).then((function(n){return n.json()}))}(t,r).then((function(n){if(0===n.ok)return d(n.message);c(""),o(""),x.push("/")}))},children:[Object(J.jsx)(ye,{children:"\u6587\u7ae0\u6a19\u984c"}),Object(J.jsx)(me,{type:"text",value:t,onChange:function(n){c(n.target.value),d("")}}),Object(J.jsx)(ye,{children:"\u6587\u7ae0\u5167\u5bb9"}),Object(J.jsx)(ve,{rows:"10",value:r,onChange:function(n){o(n.target.value),d("")}}),Object(J.jsx)(we,{children:"\u767c\u5e03"}),Object(J.jsx)(ke,{children:b})]})}var Ce,ze,Ie,Le=w.a.form(le||(le=Object(y.a)(["\n  width: 50%;\n  margin: 30px auto;\n\n  & input {\n    margin-top: 5px;\n  }\n"]))),Je=w.a.h2(xe||(xe=Object(y.a)([""]))),Ee=w.a.div(he||(he=Object(y.a)([""]))),Ne=w.a.div(ue||(ue=Object(y.a)(["\n  margin: 20px 0;\n"]))),Pe=Object(w.a)(Ee)(Oe||(Oe=Object(y.a)([""]))),Te=w.a.button(pe||(pe=Object(y.a)(["\n  margin-top: 30px;\n"]))),Ue=w.a.h3(ge||(ge=Object(y.a)(["\n  color: red;\n"])));function De(){var n=Object(jn.useContext)(C).setUser,e=Object(jn.useState)(""),t=Object(v.a)(e,2),c=t[0],i=t[1],a=Object(jn.useState)(""),r=Object(v.a)(a,2),o=r[0],s=r[1],j=Object(jn.useState)(null),b=Object(v.a)(j,2),d=b[0],l=b[1],x=Object(S.f)(),h="Lidemy";return Object(J.jsxs)(Le,{onSubmit:function(e){e.preventDefault(),function(n,e,t){return fetch("".concat(bn,"/register"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({nickname:n,username:e,password:t})}).then((function(n){return n.json()}))}(o,c,h).then((function(e){if(0===e.ok)return l(e.message);I(e.token),ln().then((function(e){if(0===e.ok)return l(e.message);n(e.data),x.push("/")}))}))},children:[Object(J.jsx)(Je,{children:"\u8acb\u8f38\u5165\u8a3b\u518a\u8cc7\u6599"}),Object(J.jsxs)(Ee,{children:[Object(J.jsx)("div",{children:"\u5e33\u865f Username"})," ",Object(J.jsx)("input",{type:"text",name:"username",value:c,onChange:function(n){i(n.target.value),l("")}})]}),Object(J.jsxs)(Ne,{children:[Object(J.jsx)("div",{children:"\u5bc6\u78bc Password"})," ",Object(J.jsx)("input",{type:"password",name:"password",value:h}),Object(J.jsx)("span",{children:" \u56e0\u8cc7\u5b89\u8003\u91cf\uff0c\u5bc6\u78bc\u7686\u9810\u8a2d\u70ba Lidemy"})]}),Object(J.jsxs)(Pe,{children:[Object(J.jsx)("div",{children:"\u66b1\u7a31 Nickname"}),Object(J.jsx)("input",{type:"text",name:"nickname",value:o,onChange:function(n){s(n.target.value),l("")}})]}),Object(J.jsx)(Te,{type:"submit",children:"\u9001\u51fa"}),d&&Object(J.jsx)(Ue,{children:d})]})}var Ae,Fe=w.a.div(Ce||(Ce=Object(y.a)(["\n  width: 30%;\n  margin: 30px auto;\n  text-align: center;\n  min-height: 500px;\n"]))),Me=w.a.h2(ze||(ze=Object(y.a)(["\n  margin: 0 auto;\n  font-size: 24px;\n  width: 70%;\n  color: #333;\n  text-decoration: none;\n"]))),$e=w.a.div(Ie||(Ie=Object(y.a)(["\n  display: flex;\n  margin-top: 10px;\n  color: rgba(0, 0, 0, 0.6);\n  justify-content: center; \n  font-size: 20px;\n"])));function Be(){return Object(J.jsxs)(Fe,{children:[Object(J.jsx)(Me,{children:"\u95dc\u65bc\u2026\u2026"}),Object(J.jsx)($e,{children:"\u9019\u88e1\u662f\u54ea\u88e1\u6211\u662f\u8ab0"})]})}var Xe=w.a.div(Ae||(Ae=Object(y.a)(["\n  padding-top: 64px;\n  margin: 0px;\n  height: 100%;\n"])));var _e=function(){var n=Object(jn.useState)(),e=Object(v.a)(n,2),t=e[0],c=e[1];return Object(jn.useEffect)((function(){L()&&ln().then((function(n){n.ok&&c(n.data)}))}),[]),Object(J.jsx)(C.Provider,{value:{user:t,setUser:c},children:Object(J.jsxs)(Xe,{children:[Object(J.jsxs)(k.a,{children:[Object(J.jsx)($,{}),Object(J.jsxs)(S.c,{children:[Object(J.jsx)(S.a,{exact:!0,path:"/",children:Object(J.jsx)(Mn,{})}),Object(J.jsx)(S.a,{exact:!0,path:"/login",children:Object(J.jsx)(gn,{})}),Object(J.jsx)(S.a,{exact:!0,path:"/posts/:id",children:Object(J.jsx)(de,{})}),Object(J.jsx)(S.a,{exact:!0,path:"/new-post",children:Object(J.jsx)(Se,{})}),Object(J.jsx)(S.a,{exact:!0,path:"/post-list",children:Object(J.jsx)(ne,{})}),Object(J.jsx)(S.a,{exact:!0,path:"/register",children:Object(J.jsx)(De,{})}),Object(J.jsx)(S.a,{exact:!0,path:"/about",children:Object(J.jsx)(Be,{})})]})]}),Object(J.jsx)(Z,{})]})})},We=function(n){n&&n instanceof Function&&t.e(3).then(t.bind(null,38)).then((function(e){var t=e.getCLS,c=e.getFID,i=e.getFCP,a=e.getLCP,r=e.getTTFB;t(n),c(n),i(n),a(n),r(n)}))};m.a.render(Object(J.jsx)(g.a.StrictMode,{children:Object(J.jsx)(_e,{})}),document.getElementById("root")),We()}},[[37,1,2]]]);
//# sourceMappingURL=main.4c241c42.chunk.js.map